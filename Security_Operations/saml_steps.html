<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SAML Steps Ordering PBQ</title>
<style>
  :root{
    --bg:#0d1117;--card:#161b22;--ink:#e6edf3;
    --border:#263042;--good:#2ea043;--bad:#ff6b6b;
  }
  body{
    background:var(--bg);
    color:var(--ink);
    font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
    margin:0;
    padding:20px;
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  h1{
    font-size:1.25rem;
    margin-bottom:20px;
    text-align:center;
  }
  #list{
    display:flex;
    flex-direction:column;
    gap:12px;
    width:100%;
    max-width:550px;
  }
  .item{
    background:var(--card);
    border:2px solid var(--border);
    padding:18px 14px;
    border-radius:12px;
    cursor:grab;
    user-select:none;
    text-align:center; /* centered text */
  }
  button{
    margin-top:30px;
    padding:14px 16px;
    border-radius:12px;
    background:var(--good);
    color:white;
    border:none;
    font-size:1rem;
    cursor:pointer;
    width:200px;
  }
</style>
</head>
<body>

<h1>Order the SAML Web Browser SSO steps</h1>
<div id="list"></div>
<button onclick="checkOrder()">Check Order</button>

<script>
const correct = [
  "User tries to access SP",
  "SP redirects browser to IdP with AuthnRequest",
  "IdP authenticates user",
  "IdP builds + signs SAML assertion",
  "IdP POSTs SAML Response to SP ACS URL",
  "SP verifies signature",
  "SP creates session for user"
];

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

const list = document.getElementById("list");

shuffle([...correct]).forEach(text=>{
  const div=document.createElement("div");
  div.className="item";
  div.draggable=true;
  div.textContent=text;
  div.addEventListener("dragstart", e=>{
    e.dataTransfer.setData("text/plain", text);
    window.dragging=div;
  });
  div.addEventListener("dragover", e=>e.preventDefault());
  div.addEventListener("drop",e=>{
    e.preventDefault();
    if(window.dragging && window.dragging!==div){
      const items=[...list.children];
      const from=items.indexOf(window.dragging);
      const to=items.indexOf(div);
      if(from<to) list.insertBefore(window.dragging, div.nextSibling);
      else list.insertBefore(window.dragging, div);
    }
  });
  list.appendChild(div);
});

function checkOrder(){
  [...list.children].forEach((div,i)=>{
    div.style.borderColor = (div.textContent===correct[i]) ? "var(--good)" : "var(--bad)";
  });
}
</script>

</body>
</html>
