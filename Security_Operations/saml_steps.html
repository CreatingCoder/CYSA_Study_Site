<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SAML Steps Ordering PBQ</title>
<style>
  body{
    background:#0d1117;
    color:#e6edf3;
    font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;
    margin:0;padding:20px;
  }
  h1{font-size:1.3rem;margin-bottom:15px}
  #list{display:flex;flex-direction:column;gap:10px;max-width:650px}
  .item{
    background:#161b22;
    border:2px solid #263042;
    padding:12px;
    border-radius:10px;
    cursor:grab;
    user-select:none;
  }
  button{
    margin-top:25px;
    padding:12px 16px;
    border-radius:10px;
    background:#238636;
    color:white;
    border:none;
    font-size:1rem;
    cursor:pointer;
    width:200px;
  }
</style>
</head>
<body>

<h1>Order the SAML Web Browser SSO steps</h1>
<div id="list"></div>
<button onclick="checkOrder()">Check Order</button>

<script>
const correct = [
  "User tries to access SP",
  "SP redirects browser to IdP with AuthnRequest",
  "IdP authenticates user",
  "IdP builds + signs SAML assertion",
  "IdP POSTs SAML Response to SP ACS URL",
  "SP verifies signature",
  "SP creates session for user"
];

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

const list = document.getElementById("list");

// build UI
shuffle([...correct]).forEach(text=>{
  const div=document.createElement("div");
  div.className="item";
  div.draggable=true;
  div.textContent=text;
  div.addEventListener("dragstart", e=>{
    e.dataTransfer.setData("text/plain", text);
    window.dragging=div;
  });
  div.addEventListener("dragover", e=>e.preventDefault());
  div.addEventListener("drop",e=>{
    e.preventDefault();
    if(window.dragging && window.dragging!==div){
      const items=[...list.children];
      const from=items.indexOf(window.dragging);
      const to=items.indexOf(div);
      if(from<to) list.insertBefore(window.dragging, div.nextSibling);
      else list.insertBefore(window.dragging, div);
    }
  });
  list.appendChild(div);
});

function checkOrder(){
  [...list.children].forEach((div,i)=>{
    if(div.textContent===correct[i]){
      div.style.borderColor="#2ea043";
    }else{
      div.style.borderColor="#ff6b6b";
    }
  });
}
</script>

</body>
</html>
