<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CySA+ Log Reading Practice</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  :root{
    --bg:#05060a;
    --card:#121826;
    --accent:#3b82f6;
    --accent-soft:rgba(59,130,246,0.1);
    --ink:#e5e7eb;
    --muted:#9ca3af;
    --good:#22c55e;
    --bad:#ef4444;
    --radius:14px;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:radial-gradient(circle at top,#111827 0,#020617 55%,#000 100%);
    color:var(--ink);
    padding:16px;
  }
  .app{
    max-width:900px;
    margin:0 auto;
    background:var(--card);
    border-radius:var(--radius);
    padding:18px 16px 20px;
    box-shadow:0 18px 60px rgba(0,0,0,0.7);
  }
  h1{
    font-size:1.4rem;
    margin:0 0 4px;
    text-align:center;
  }
  .sub{
    text-align:center;
    font-size:.85rem;
    color:var(--muted);
    margin-bottom:14px;
  }
  .meta{
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-size:.8rem;
    color:var(--muted);
    margin-bottom:8px;
    gap:8px;
    flex-wrap:wrap;
  }
  .pill{
    padding:4px 10px;
    border-radius:999px;
    background:var(--accent-soft);
    color:var(--accent);
    font-size:.75rem;
  }
  .log-wrapper{
    background:#020617;
    border-radius:var(--radius);
    padding:10px 10px 8px;
    border:1px solid #1f2937;
    margin-bottom:10px;
  }
  .log-label{
    font-size:.75rem;
    color:var(--muted);
    margin-bottom:4px;
  }
  pre{
    margin:0;
    font-family:"Fira Code",ui-monospace,Menlo,Monaco,Consolas,"Courier New",monospace;
    font-size:.78rem;
    line-height:1.4;
    white-space:pre-wrap;
    word-wrap:break-word;
    max-height:150px;
    overflow-y:auto;
  }
  .prompt{
    margin:10px 0 8px;
    font-size:.9rem;
  }
  .options{
    display:flex;
    flex-direction:column;
    gap:6px;
    margin-bottom:10px;
  }
  .opt-btn{
    border-radius:999px;
    border:1px solid #1f2937;
    padding:7px 10px;
    background:#020617;
    color:var(--ink);
    text-align:left;
    font-size:.85rem;
    cursor:pointer;
    display:flex;
    align-items:flex-start;
    gap:7px;
  }
  .opt-btn span.key{
    font-weight:600;
    color:var(--muted);
    min-width:18px;
  }
  .opt-btn.correct{
    border-color:var(--good);
    background:rgba(34,197,94,0.12);
  }
  .opt-btn.wrong{
    border-color:var(--bad);
    background:rgba(239,68,68,0.12);
  }
  .opt-btn:disabled{
    opacity:.85;
    cursor:default;
  }
  .feedback{
    min-height:20px;
    font-size:.85rem;
    margin-bottom:8px;
  }
  .feedback.good{color:var(--good);}
  .feedback.bad{color:var(--bad);}
  .explanation{
    font-size:.8rem;
    color:var(--muted);
    border-left:3px solid #1f2937;
    padding-left:8px;
  }
  .controls{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-top:10px;
    gap:8px;
    flex-wrap:wrap;
  }
  button.nav{
    border:none;
    border-radius:999px;
    padding:7px 14px;
    background:var(--accent);
    color:white;
    font-size:.85rem;
    cursor:pointer;
  }
  button.nav:disabled{
    opacity:.4;
    cursor:default;
  }
  .progress{
    font-size:.8rem;
    color:var(--muted);
  }
  @media (max-width:600px){
    .app{padding:14px 10px 16px;}
    .opt-btn{font-size:.8rem;}
  }
</style>
</head>
<body>
<div class="app">
  <h1>CySA+ Log Reading Practice</h1>
  <div class="sub">Interpret realistic logs and choose the best description of the activity.</div>

  <div class="meta">
    <div id="qCounter" class="pill">Question 1</div>
    <div class="progress" id="scoreDisplay">Score: 0 / 0</div>
  </div>

  <div class="log-wrapper">
    <div class="log-label">Log sample</div>
    <pre id="logText"></pre>
  </div>

  <div id="prompt" class="prompt"></div>

  <div id="options" class="options"></div>

  <div id="feedback" class="feedback"></div>
  <div id="explanation" class="explanation"></div>

  <div class="controls">
    <button class="nav" id="prevBtn">◀ Prev</button>
    <button class="nav" id="nextBtn">Next ▶</button>
  </div>
</div>

<script>
const questions = [
  // 1
  {
    log:`2025-11-26T12:14:03Z firewall01 DENY TCP src=10.2.5.23 dst=172.16.10.5 sport=51522 dport=22
  rule=BLOCK_SSH_OUT direction=OUT interface=LAN`,
    prompt:"What BEST describes this activity?",
    options:[
      "User successfully SSH'd from internal to DMZ server.",
      "Firewall blocked outbound SSH from an internal host.",
      "Firewall blocked inbound SSH from the Internet.",
      "Firewall allowed SSH from jump box to router."
    ],
    answer:1,
    explanation:"Action is DENY, direction OUT, destination port 22 → outbound SSH attempt blocked by policy."
  },
  // 2
  {
    log:`Nov 26 02:17:43 web01 sshd[1820]: Failed password for invalid user admin from 203.0.113.45 port 49822 ssh2
Nov 26 02:17:44 web01 sshd[1820]: Failed password for invalid user admin from 203.0.113.45 port 49822 ssh2
Nov 26 02:17:45 web01 sshd[1820]: Failed password for invalid user admin from 203.0.113.45 port 49822 ssh2`,
    prompt:"What is MOST likely occurring?",
    options:[
      "Normal failed login due to forgotten password.",
      "SSH key exchange problem between trusted peers.",
      "Automated brute-force attempt against SSH.",
      "Misconfigured PAM module on the server."
    ],
    answer:2,
    explanation:"Rapid repeated failed logins for 'invalid user admin' from same IP indicates automated brute-force."
  },
  // 3
  {
    log:`2025-11-26T07:51:10Z proxy01 ALLOW user=jdoe src=10.20.4.17 dst=198.51.100.37 method=CONNECT host=login.bank.example.com
  category=Finance bytes_out=3221 bytes_in=81233`,
    prompt:"What does this log MOST likely indicate?",
    options:[
      "User tunneled SSH over HTTP.",
      "User accessed an external banking website via HTTPS through the proxy.",
      "User attempted to exfiltrate data using DNS tunneling.",
      "Proxy blocked access to financial sites."
    ],
    answer:1,
    explanation:"CONNECT to port 443 host 'login.bank...' with ALLOW indicates HTTPS web access via proxy."
  },
  // 4
  {
    log:`Nov 26 09:12:02 ids01 alert: [1:2010935:3] ET SCAN Nmap Scripting Engine User-Agent Detected
  src=203.0.113.77 dst=192.168.50.12 proto=TCP sport=46520 dport=80`,
    prompt:"What is happening?",
    options:[
      "User browsing the corporate intranet.",
      "Legitimate vulnerability scan from internal scanner.",
      "Nmap scan using NSE scripts against a web server.",
      "Regular patch management traffic."
    ],
    answer:2,
    explanation:"Signature explicitly references Nmap Scripting Engine → indicates an NSE-based scan."
  },
  // 5
  {
    log:`2025-11-26T10:04:11Z dns01 QUERY client=10.1.4.33 qname=_ldap._tcp.ad.example.com qtype=SRV
2025-11-26T10:04:11Z dns01 RESPONSE client=10.1.4.33 qname=_ldap._tcp.ad.example.com answers=dc01.ad.example.com`,
    prompt:"What is the MOST likely purpose of this DNS activity?",
    options:[
      "User performing DNS exfiltration.",
      "System locating a domain controller for LDAP/AD services.",
      "Client resolving a public website.",
      "Malware beacon checking C2.",
    ],
    answer:1,
    explanation:"_ldap._tcp SRV lookup is typical of Windows clients discovering domain controllers."
  },
  // 6
  {
    log:`2025-11-26T08:22:40Z vpn01 AUTH_FAIL user=jdoe src_ip=198.51.100.200 reason=INVALID_OTP
2025-11-26T08:22:45Z vpn01 AUTH_SUCCESS user=jdoe src_ip=198.51.100.200`,
    prompt:"What is the BEST interpretation?",
    options:[
      "Account lockout due to brute force.",
      "User mistyped one-time token once, then successfully logged in.",
      "VPN server misconfiguration.",
      "Man-in-the-middle attack on VPN.",
    ],
    answer:1,
    explanation:"Single AUTH_FAIL with INVALID_OTP followed by AUTH_SUCCESS from same IP suggests user error then success."
  },
  // 7
  {
    log:`2025-11-26T11:12:09Z fw-edge01 ALLOW UDP src=10.1.20.15 dst=8.8.8.8 sport=56535 dport=53
2025-11-26T11:12:09Z fw-edge01 ALLOW UDP src=10.1.20.15 dst=8.8.8.8 sport=56536 dport=53
2025-11-26T11:12:09Z fw-edge01 ALLOW UDP src=10.1.20.15 dst=8.8.8.8 sport=56537 dport=53 size=512`,
    prompt:"What should the analyst consider based on this pattern?",
    options:[
      "Possible DNS tunneling due to many DNS-sized packets.",
      "Standard DNS queries to public resolver.",
      "ICMP tunneling.",
      "SMTP spam campaign.",
    ],
    answer:0,
    explanation:"Rapid high-volume DNS packets of maximum size can indicate DNS tunneling; requires further investigation."
  },
  // 8
  {
    log:`Nov 26 03:33:11 win01 Security: An account failed to log on.
  Subject:  Security ID:  S-1-0-0
  Account Name:  -
  Logon Type:  3
  Account For Which Logon Failed:  User Name: administrator
  Failure Information:  Status: 0xC000006A  Sub Status: 0xC0000064`,
    prompt:"What does this MOST likely represent?",
    options:[
      "Failed local console login.",
      "Failed network logon attempt to the host using the 'administrator' account.",
      "Successful service logon.",
      "User locked out due to expired password.",
    ],
    answer:1,
    explanation:"Logon Type 3 = network logon to a resource; status codes show failed attempt for 'administrator'."
  },
  // 9
  {
    log:`2025-11-26T13:02:55Z web01 nginx: 198.51.100.90 - - "GET /index.php?id=1%20OR%201=1-- HTTP/1.1" 200 512 "-" "Mozilla/5.0"`,
    prompt:"What attack does this MOST likely indicate?",
    options:[
      "Command injection.",
      "SQL injection attempt.",
      "Directory traversal.",
      "Cross-site scripting.",
    ],
    answer:1,
    explanation:`id=1 OR 1=1-- is classic SQL injection syntax in the query string.`
  },
  // 10
  {
    log:`2025-11-26T09:45:21Z mail01 postfix/smtpd[2231]: NOQUEUE: reject: RCPT from unknown[203.0.113.60]:
  554 5.7.1 <user@example.com>: Relay access denied; from=<spammer@bad.com> to=<user@example.com> proto=ESMTP helo=<bad.com>`,
    prompt:"What does this log show?",
    options:[
      "Mail server accepted a phishing email.",
      "Mail server relayed spam to the Internet.",
      "Mail server rejected an unauthenticated relay attempt.",
      "User's mailbox was deleted.",
    ],
    answer:2,
    explanation:"NOQUEUE + 'Relay access denied' indicates server refused to relay mail from that source."
  },
  // 11
  {
    log:`Nov 26 04:41:18 db01 sudo:  johnd : TTY=pts/1 ; PWD=/home/johnd ; USER=root ; COMMAND=/usr/bin/mysql`,
    prompt:"What does this tell the analyst?",
    options:[
      "User johnd attempted and failed to become root.",
      "User johnd successfully ran mysql with elevated privileges.",
      "Root user logged into johnd's account.",
      "An automated script executed mysql as root.",
    ],
    answer:1,
    explanation:"sudo log entry shows the command executed as USER=root. No error indicated → success."
  },
  // 12
  {
    log:`2025-11-26T11:09:02Z EDR01 ALERT type=RANSOM_NOTE_CREATED host=ENG-LAPTOP07 user=jsmith
  path="C:\\Users\\jsmith\\Desktop\\READ_ME.txt" hash=...`,
    prompt:"What is the MOST appropriate immediate response?",
    options:[
      "Whitelist the file and continue normal operations.",
      "Isolate the host from the network and begin incident response.",
      "Deactivate the EDR agent.",
      "Ignore, as it's likely a false positive.",
    ],
    answer:1,
    explanation:"Ransom note creation on endpoint → potential active ransomware. Isolate host and trigger IR procedures."
  },
  // 13
  {
    log:`Nov 26 05:15:22 web01 httpd: 10.1.15.77 - - "GET /../../../../etc/passwd HTTP/1.1" 400 226 "-" "curl/7.79.1"`,
    prompt:"What technique is being attempted?",
    options:[
      "Directory traversal.",
      "SQL injection.",
      "Clickjacking.",
      "Subdomain takeover.",
    ],
    answer:0,
    explanation:`/../../../../etc/passwd` path is characteristic of directory traversal attempts on *nix systems."
  },
  // 14
  {
    log:`2025-11-26T14:20:09Z fw-dmz01 DENY TCP src=198.51.100.23 dst=203.0.113.10 sport=443 dport=3389
  rule=BLOCK_RDP_IN interface=WAN`,
    prompt:"What is being blocked?",
    options:[
      "Outbound RDP from DMZ.",
      "Inbound RDP from the Internet to an internal server.",
      "SMTP relay traffic.",
      "DNS zone transfer.",
    ],
    answer:1,
    explanation:"interface=WAN, dport=3389, DENY → blocking inbound RDP from Internet."
  },
  // 15
  {
    log:`Nov 26 08:02:15 winfile01 Security: A user account was locked out.
  Subject:  Security ID:  SYSTEM
  Account That Was Locked Out:  Security ID:  S-1-5-21-...-1105  Account Name:  svcBackup`,
    prompt:"What should the analyst investigate FIRST?",
    options:[
      "Check for password spray attempts against svcBackup.",
      "Check DNS misconfiguration.",
      "Check for hardware failure on disk.",
      "Check VPN configuration.",
    ],
    answer:0,
    explanation:"Service account lockouts often indicate incorrect stored credentials or spray/brute-force attempts."
  },
  // 16
  {
    log:`2025-11-26T06:55:44Z waf01 ALERT rule=SQL_INJECTION uri="/search" src_ip=203.0.113.89
  action=BLOCK http_status=403`,
    prompt:"What does this show?",
    options:[
      "Host was successfully exploited via SQL injection.",
      "WAF blocked suspected SQL injection against /search.",
      "Normal search query.",
      "DoS attack with SYN flood.",
    ],
    answer:1,
    explanation:"WAF rule SQL_INJECTION and action=BLOCK with 403 indicates it blocked the request."
  },
  // 17
  {
    log:`2025-11-26T12:31:11Z vpn01 NEW_SESSION user=alice src_ip=203.0.113.22 device=Unknown_OS
2025-11-26T12:31:12Z nac01 QUARANTINE host_mac=00:16:3e:ab:cd:ef reason=NON_COMPLIANT_OS`,
    prompt:"What is happening?",
    options:[
      "User's VPN connection is fully trusted.",
      "NAC solution is restricting a non-compliant endpoint.",
      "VPN credential theft.",
      "Firewall misconfiguration blocking all VPN.",
    ],
    answer:1,
    explanation:"NAC QUARANTINE immediately after new session for unknown OS indicates NAC enforcement of compliance."
  },
  // 18
  {
    log:`Nov 26 09:50:02 ad01 Kerberos TGS-REQ  client=jsmith@AD.EXAMPLE.COM  service=cifs/fileserver.ad.example.com
  Result: 0x0`,
    prompt:"What does this Kerberos log indicate?",
    options:[
      "Failed ticket request for file share.",
      "Successful service ticket request for accessing a file share.",
      "Password change attempt.",
      "Account lockout.",
    ],
    answer:1,
    explanation:"Result 0x0 indicates success; service=cifs/... shows ticket for file share access."
  },
  // 19
  {
    log:`2025-11-26T15:22:13Z ids01 alert: ET POLICY PE EXE or DLL Windows file download
  src=198.51.100.45 dst=10.10.5.44 http_host=cdn.unknown-downloads.com uri="/files/setup.exe"`,
    prompt:"What is the BEST next step?",
    options:[
      "Immediately block all HTTP traffic.",
      "Review proxy and endpoint logs for this host and potentially quarantine it.",
      "Ignore because it's from a CDN.",
      "Reboot the IDS sensor.",
    ],
    answer:1,
    explanation:"Executable download from suspicious host warrants deeper investigation and possibly quarantine."
  },
  // 20
  {
    log:`2025-11-26T13:59:40Z fw-core01 ALLOW TCP src=10.30.4.8 dst=10.10.0.25 sport=51524 dport=1433
  rule=DB_ACCESS role=AppServer`,
    prompt:"What is MOST likely being observed?",
    options:[
      "Application server connecting to SQL database.",
      "Malware beacon to C2.",
      "User web browsing.",
      "SSH session from DB to app server.",
    ],
    answer:0,
    explanation:"Port 1433 is MS SQL; rule label DB_ACCESS, role AppServer indicates normal app-to-DB traffic."
  },
  // 21
  {
    log:`Nov 26 07:18:41 linux01 cron[1205]: (root) CMD (/usr/local/bin/backup.sh)
Nov 26 07:18:41 linux01 backup.sh[1210]: Backup completed successfully`,
    prompt:"How should this be classified?",
    options:[
      "Malicious persistence mechanism.",
      "Normal scheduled job.",
      "Privilege escalation attempt.",
      "Account lockout.",
    ],
    answer:1,
    explanation:"cron job for backup.sh as root with success message appears to be expected scheduled maintenance."
  },
  // 22
  {
    log:`2025-11-26T16:01:03Z proxy01 DENY user=guest src=10.5.4.99 dst=151.101.1.69 host=github.com category=SourceCode`,
    prompt:"What policy is MOST likely in place?",
    options:[
      "Block all Internet access.",
      "Block access to code hosting sites for guest users.",
      "Block social media during business hours.",
      "Block all HTTPS traffic.",
    ],
    answer:1,
    explanation:"DENY for host github.com with category SourceCode and user=guest suggests role-based restriction."
  },
  // 23
  {
    log:`Nov 26 09:09:18 win10 Security: An attempt was made to reset an account's password.
  Subject: Security ID:  AD\\helpdesk1
  Target Account:  Account Name:  ceo  Result: 0x0`,
    prompt:"What is the MOST important follow-up?",
    options:[
      "Verify that helpdesk1 is authorized to reset the CEO's password.",
      "Block all password resets.",
      "Rebuild the CEO's workstation.",
      "Disable all helpdesk accounts.",
    ],
    answer:0,
    explanation:"Password reset for high-value account by helpdesk must be verified as legitimate and authorized."
  },
  // 24
  {
    log:`2025-11-26T11:44:55Z fw-edge01 ALLOW ICMP src=203.0.113.5 dst=198.51.100.10 type=8 code=0
2025-11-26T11:44:55Z fw-edge01 ALLOW ICMP src=198.51.100.10 dst=203.0.113.5 type=0 code=0`,
    prompt:"What does this represent?",
    options:[
      "ICMP echo request and reply (ping).",
      "ICMP unreachable messages.",
      "ICMP redirect.",
      "ICMP port scanning.",
    ],
    answer:0,
    explanation:"Type 8 = echo request, type 0 = echo reply → normal ping."
  },
  // 25
  {
    log:`Nov 26 10:21:30 linux02 sudo: pam_unix(sudo:auth): authentication failure; logname= uid=1001 euid=0 tty=/dev/pts/0 user=jdoe`,
    prompt:"What is occurring here?",
    options:[
      "jdoe successfully ran sudo.",
      "jdoe failed to authenticate for sudo.",
      "Root user changed jdoe's password.",
      "System rebooted unexpectedly.",
    ],
    answer:1,
    explanation:"authentication failure for sudo indicates jdoe entered wrong password or is not authorized."
  },
  // 26
  {
    log:`2025-11-26T18:03:04Z ids01 alert: ET POLICY Outbound Self-Signed SSL Certificate
  src=10.1.30.44 dst=203.0.113.200 sni=updates.unknownsoft.biz`,
    prompt:"What should the analyst suspect?",
    options:[
      "Normal connection to approved vendor.",
      "Potential malware using encrypted outbound channel.",
      "DNS misconfiguration.",
      "FTP data transfer.",
    ],
    answer:1,
    explanation:"Outbound self-signed SSL to unknown domain is common with malware C2 or shady software; investigate host."
  },
  // 27
  {
    log:`2025-11-26T17:14:11Z fw-edge01 DENY UDP src=203.0.113.88 dst=198.51.100.10 sport=53 dport=53 rule=BLOCK_DNS_REFLECT`,
    prompt:"What type of activity is MOST likely being blocked?",
    options:[
      "DNS zone transfer.",
      "DNS reflection/amplification traffic.",
      "Regular DNS query.",
      "SMTP relay.",
    ],
    answer:1,
    explanation:"UDP 53 to 53 from Internet → often reflection traffic; rule name BLOCK_DNS_REFLECT confirms."
  },
  // 28
  {
    log:`Nov 26 12:05:55 ad01 Security: A member was added to a security-enabled global group.
  Subject:  Security ID: AD\\admin1
  Member:  Security ID: AD\\jdoe
  Group:  Security ID: AD\\Domain Admins`,
    prompt:"Why is this event critical?",
    options:[
      "User jdoe was disabled.",
      "User jdoe was added to Domain Admins group, greatly increasing privileges.",
      "Domain Admins group was deleted.",
      "admin1 reset their own password.",
    ],
    answer:1,
    explanation:"Addition to Domain Admins is highly sensitive and should be tightly controlled and monitored."
  },
  // 29
  {
    log:`2025-11-26T19:22:31Z web01 nginx: 203.0.113.50 - - "GET /search?q=<script>alert('x')</script> HTTP/1.1" 400 190 "-" "Mozilla/5.0"`,
    prompt:"What attack is being attempted?",
    options:[
      "SQL injection.",
      "Cross-site scripting (XSS).",
      "Directory traversal.",
      "Command injection.",
    ],
    answer:1,
    explanation:"Injected <script> tag in query parameter is a typical reflected XSS attempt."
  },
  // 30
  {
    log:`2025-11-26T20:11:09Z siem01 CORRELATION_ALERT name="Multiple Failed VPN Logins then Success"
  user=jsmith fails=7 success_src_ip=203.0.113.31 window=5m`,
    prompt:"How should this correlation be interpreted?",
    options:[
      "Likely normal login behavior.",
      "Potential credential stuffing or brute force followed by successful access.",
      "VPN configuration error.",
      "Network outage.",
    ],
    answer:1,
    explanation:"Multiple failures then success within short window suggests brute-force/stuffing that finally succeeded."
  }
];

let current = 0;
let score = 0;
let answeredCount = 0;
const answered = Array(questions.length).fill(false);

const logTextEl = document.getElementById('logText');
const promptEl = document.getElementById('prompt');
const optionsEl = document.getElementById('options');
const feedbackEl = document.getElementById('feedback');
const explanationEl = document.getElementById('explanation');
const qCounterEl = document.getElementById('qCounter');
const scoreDisplayEl = document.getElementById('scoreDisplay');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');

function renderQuestion(idx){
  const q = questions[idx];
  qCounterEl.textContent = `Question ${idx+1} of ${questions.length}`;
  logTextEl.textContent = q.log;
  promptEl.textContent = q.prompt;
  feedbackEl.textContent = "";
  feedbackEl.className = "feedback";
  explanationEl.textContent = "";

  optionsEl.innerHTML = "";
  q.options.forEach((opt,i)=>{
    const btn = document.createElement('button');
    btn.className = 'opt-btn';
    btn.innerHTML = `<span class="key">${String.fromCharCode(65+i)}.</span> <span>${opt}</span>`;
    btn.onclick = ()=> handleAnswer(i, btn);
    optionsEl.appendChild(btn);
  });

  // if already answered, show correct and explanation and disable
  if(answered[idx]){
    const children = optionsEl.querySelectorAll('.opt-btn');
    children.forEach((btn,i)=>{
      btn.disabled = true;
      if(i === q.answer) btn.classList.add('correct');
    });
    feedbackEl.textContent = "Already answered.";
    feedbackEl.classList.add('good');
    explanationEl.textContent = q.explanation;
  }

  prevBtn.disabled = (idx === 0);
  nextBtn.disabled = (idx === questions.length-1);
}

function handleAnswer(choice, btn){
  const q = questions[current];
  if(answered[current]) return; // don't re-score

  const all = optionsEl.querySelectorAll('.opt-btn');
  all.forEach(b=>b.disabled=true);

  if(choice === q.answer){
    btn.classList.add('correct');
    feedbackEl.textContent = "Correct!";
    feedbackEl.classList.add('good');
    score++;
  }else{
    btn.classList.add('wrong');
    all[q.answer].classList.add('correct');
    feedbackEl.textContent = "Incorrect.";
    feedbackEl.classList.add('bad');
  }
  explanationEl.textContent = q.explanation;
  answered[current] = true;
  answeredCount++;
  scoreDisplayEl.textContent = `Score: ${score} / ${answeredCount}`;
}

prevBtn.addEventListener('click', ()=>{
  if(current>0){
    current--;
    renderQuestion(current);
  }
});
nextBtn.addEventListener('click', ()=>{
  if(current<questions.length-1){
    current++;
    renderQuestion(current);
  }
});

// init
scoreDisplayEl.textContent = "Score: 0 / 0";
renderQuestion(current);
</script>
</body>
</html>
